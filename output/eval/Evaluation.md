## Evaluation Results on Spider Dataset



#### Codellama-13b-Instruction

- **SFT with Code Representation Prompt, 2000steps**

|           | easy | medium | hard | extra | all  |
| --------- | ---- | ------ | ---- | ----- | ---- |
| **count** | 470  | 857    | 463  | 357   | 2147 |

--------------------- EXECUTION ACCURACY --------------------- 

|               | easy  | medium | hard  | extra | all   |
| ------------- | ----- | ------ | ----- | ----- | ----- |
| **execution** | 0.883 | 0.750  | 0.659 | 0.571 | 0.730 |

--------------------- EXACT MATCHING ACCURACY --------------------- 

|                 | easy  | medium | hard  | extra | all   |
| --------------- | ----- | ------ | ----- | ----- | ----- |
| **exact match** | 0.855 | 0.679  | 0.536 | 0.403 | 0.641 |

--------------------- PARTIAL MATCHING ACCURACY ----------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.930 | 0.893  | 0.897 | 0.857 | 0.896 |
| **select(no AGG)**   | 0.941 | 0.897  | 0.906 | 0.860 | 0.903 |
| **where**            | 0.922 | 0.801  | 0.702 | 0.657 | 0.765 |
| **where(no OP)**     | 0.929 | 0.814  | 0.777 | 0.781 | 0.816 |
| **group(no Having)** | 0.921 | 0.837  | 0.893 | 0.689 | 0.819 |
| **group**            | 0.895 | 0.795  | 0.818 | 0.644 | 0.770 |
| **order**            | 0.939 | 0.975  | 0.906 | 0.782 | 0.894 |
| **and/or**           | 1.000 | 0.988  | 0.987 | 0.952 | 0.984 |
| **IUEN**             | 0.000 | 0.000  | 0.551 | 0.629 | 0.558 |
| **keywords**         | 0.954 | 0.941  | 0.831 | 0.748 | 0.878 |

---------------------- PARTIAL MATCHING RECALL ----------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.906 | 0.835  | 0.806 | 0.754 | 0.831 |
| **select(no AGG)**   | 0.917 | 0.839  | 0.814 | 0.756 | 0.837 |
| **where**            | 0.897 | 0.796  | 0.656 | 0.505 | 0.704 |
| **where(no OP)**     | 0.903 | 0.809  | 0.726 | 0.600 | 0.751 |
| **group(no Having)** | 0.921 | 0.766  | 0.831 | 0.684 | 0.771 |
| **group**            | 0.895 | 0.727  | 0.762 | 0.640 | 0.725 |
| **order**            | 0.939 | 0.898  | 0.868 | 0.732 | 0.849 |
| **and/or**           | 0.996 | 0.998  | 0.974 | 0.980 | 0.989 |
| **IUEN**             | 0.000 | 0.000  | 0.475 | 0.454 | 0.463 |
| **keywords**         | 0.932 | 0.886  | 0.754 | 0.650 | 0.811 |

---------------------- PARTIAL MATCHING F1 --------------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.918 | 0.863  | 0.849 | 0.802 | 0.862 |
| **select(no AGG)**   | 0.929 | 0.867  | 0.858 | 0.805 | 0.869 |
| **where**            | 0.909 | 0.799  | 0.679 | 0.571 | 0.733 |
| **where(no OP)**     | 0.916 | 0.812  | 0.750 | 0.679 | 0.782 |
| **group(no Having)** | 0.921 | 0.800  | 0.861 | 0.686 | 0.794 |
| **group**            | 0.895 | 0.759  | 0.789 | 0.642 | 0.747 |
| **order**            | 0.939 | 0.935  | 0.887 | 0.756 | 0.871 |
| **and/or**           | 0.998 | 0.993  | 0.980 | 0.965 | 0.987 |
| **IUEN**             | 1.000 | 1.000  | 0.510 | 0.527 | 0.506 |
| **keywords**         | 0.943 | 0.913  | 0.790 | 0.696 | 0.843 |





- **SFT with Text Representation Prompt, 2000steps**

|           | easy | medium | hard | extra | all  |
| --------- | ---- | ------ | ---- | ----- | ---- |
| **count** | 470  | 857    | 463  | 357   | 2147 |

--------------------- EXECUTION ACCURACY --------------------- 

|               | easy  | medium | hard  | extra | all   |
| ------------- | ----- | ------ | ----- | ----- | ----- |
| **execution** | 0.896 | 0.777  | 0.652 | 0.608 | 0.748 |

--------------------- EXACT MATCHING ACCURACY --------------------- 

|                 | easy  | medium | hard  | extra | all   |
| --------------- | ----- | ------ | ----- | ----- | ----- |
| **exact match** | 0.862 | 0.722  | 0.564 | 0.420 | 0.668 |

--------------------- PARTIAL MATCHING ACCURACY ----------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.937 | 0.902  | 0.924 | 0.894 | 0.913 |
| **select(no AGG)**   | 0.946 | 0.909  | 0.933 | 0.894 | 0.920 |
| **where**            | 0.925 | 0.815  | 0.719 | 0.669 | 0.777 |
| **where(no OP)**     | 0.932 | 0.821  | 0.807 | 0.770 | 0.825 |
| **group(no Having)** | 0.914 | 0.839  | 0.897 | 0.729 | 0.830 |
| **group**            | 0.857 | 0.828  | 0.863 | 0.684 | 0.802 |
| **order**            | 0.975 | 0.960  | 0.885 | 0.757 | 0.883 |
| **and/or**           | 1.000 | 0.985  | 0.996 | 0.957 | 0.986 |
| **IUEN**             | 0.000 | 0.000  | 0.571 | 0.463 | 0.475 |
| **keywords**         | 0.958 | 0.939  | 0.843 | 0.765 | 0.884 |

---------------------- PARTIAL MATCHING RECALL ----------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.917 | 0.859  | 0.838 | 0.804 | 0.858 |
| **select(no AGG)**   | 0.926 | 0.866  | 0.847 | 0.804 | 0.864 |
| **where**            | 0.938 | 0.812  | 0.691 | 0.541 | 0.734 |
| **where(no OP)**     | 0.945 | 0.819  | 0.776 | 0.623 | 0.780 |
| **group(no Having)** | 0.842 | 0.777  | 0.808 | 0.713 | 0.773 |
| **group**            | 0.789 | 0.766  | 0.777 | 0.669 | 0.747 |
| **order**            | 0.963 | 0.930  | 0.854 | 0.725 | 0.855 |
| **and/or**           | 0.996 | 0.996  | 0.993 | 0.977 | 0.992 |
| **IUEN**             | 0.000 | 0.000  | 0.500 | 0.381 | 0.435 |
| **keywords**         | 0.951 | 0.897  | 0.765 | 0.683 | 0.828 |

---------------------- PARTIAL MATCHING F1 --------------------------

|                      | easy  | medium | hard  | extra | all   |
| -------------------- | ----- | ------ | ----- | ----- | ----- |
| **select**           | 0.927 | 0.880  | 0.879 | 0.847 | 0.885 |
| **select(no AGG)**   | 0.935 | 0.887  | 0.888 | 0.847 | 0.891 |
| **where**            | 0.932 | 0.814  | 0.705 | 0.598 | 0.755 |
| **where(no OP)**     | 0.938 | 0.820  | 0.791 | 0.688 | 0.802 |
| **group(no Having)** | 0.877 | 0.807  | 0.850 | 0.721 | 0.800 |
| **group**            | 0.822 | 0.796  | 0.818 | 0.677 | 0.774 |
| **order**            | 0.969 | 0.944  | 0.869 | 0.741 | 0.869 |
| **and/or**           | 0.998 | 0.991  | 0.995 | 0.967 | 0.989 |
| **IUEN**             | 1.000 | 1.000  | 0.533 | 0.418 | 0.454 |
| **keywords**         | 0.955 | 0.917  | 0.802 | 0.722 | 0.855 |

